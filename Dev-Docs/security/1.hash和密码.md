# hash和密码

一般而言，存在密码的地方都得有哈希（hash）。那什么是哈希呢？它是一种函数，可以使我们的密码以另外一种表现形式存在，比如：

    md5('123') => '202cb962ac59075b964b07152d234b70'

这有什么用呢？这可以避免密码的泄露啊。试想一下，若你在某网站的账户密码以明文的方式存储在数据库中，一旦数据库被人攻陷了，那你的密码就完完全全曝光了啊；而数据库管理员也可以随时随地查看到你的密码。最可怕的是，你的密码不经处理就在网络上传来传去，想想就刺激吧！

所以我们需要对密码做一层处理，让它变成一串没有任何规律和意义的字符串，这样即使被拿到了别人也做不了什么。而哈希算法就可以对密码做这样的处理。同样的，在数据库中存储的也只是这串哈希值，当用户登录时，只要把用户输入的密码计算为哈希值，再把这个哈希值与数据库中的哈希值作对比即可。这就是哈希算法在密码中的应用了。

在密码学中，理论上哈希算法需要具备不可逆与无冲突两个性质，分别是：
- 存在y=hash(x)，但是若只知道y，无法推出x
- 若有y=hash(x)，不存在w（w!=x），使得hash(w)==y

然而实际上，哈希函数的值域都是有限的（比如MD5把信息映射为一个128位的大整数，实际存在2^128种哈希值），而定义域是无限的。以有限对无限显然不可行，所以不存在理论上的无冲突性质；另外，还真的有人把一些值的哈希值计算出来存储在数据库（这些映射对集合被称为彩虹表）中以求暴力破解。所以我们只要做到“求逆”和“求冲突”在计算上的不可能即可，也就是说正向计算很容易，而反向计算即使穷尽人类所有的计算资源都做不到。使用MD5或SHA等哈希算法，就目前而言，是能够满足不可逆与无冲突的。

关于一些概念：虽然在密码学中hash经常用来处理密码，避免密码以“明文”方式在计算机中表示。但是hash是一种消息摘要算法而非严格意义的加密算法，它是不可逆的、不完整的，即密码被hash之后无法（或者说难以）恢复原文。而加密不同，加密后的消息应该是完整的，能够使用解密算法或密钥来恢复原文的。

## 常用哈希算法

目前最常用的哈希算法MD5（Message Digest Algorithm 5）和SHA（Secure Hash Algorithm）。

前者可以把消息摘要为128位的大整数，即128位二进制，但二进制对人类不友好，所以有时候会把它转换为十六进制，每4bit表示一个十六进制符号。

SHA是一个大家族，包括SHA-1、SHA-224、SHA-256、SHA-384，和SHA-512，后四个有时被并称成SHA-2。被它们摘要的消息最终生成160位或256位等的二进制输出，算是目前最安全的哈希算法了吧。

## 后言

hash还可以应用到文件验证等上面，比如发送一个1GB的文件，接收方如何验证文件有无差错呢？可以先由发送方在发送前根据文件生成hash，并发送给接收方；接收方拿到文件后也根据文件生成一个hash，当两个hash相等时，基本可认为文件无误，否则就是文件出错什么的。

除此之外还有数字签名、防篡改等应用。


## 参考链接

- [MD5算法原理及其实现](https://blog.csdn.net/u012611878/article/details/54000607)
- [什么是哈希表和哈希算法？](https://www.guokr.com/question/562532/)
- [hash算法原理详解 - CSDN博客](https://blog.csdn.net/tanggao1314/article/details/51457585)
- [MD5算法详细介绍 - CSDN博客](https://blog.csdn.net/workdog/article/details/2039997)
