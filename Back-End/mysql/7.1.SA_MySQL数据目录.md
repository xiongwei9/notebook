# MySQL数据目录

## 数据目录位置

默认的数据目录位置被编译在服务器中。在Unix系统里（下面的讨论忽略Windows系统，具体看书），如果通过二进制或源代码发行版安装MySQL，那么数据目录通常默认为/usr/local/mysql/data；如果通过RPM包来安装，则默认目录为/var/lib/mysql。如果想在启动服务器时指定数据目录的位置，则可以使用--datadir=dir_name选项或在配置文件中配置。

那如果查询数据目录的位置呢？

如果服务器没有运行的情况下，查看服务器启动时读取的选项文件，如/etc/my.cnf，从中查到[mysqld]选项组中的datadir行。若这配置文件找不到此信息，可以调用命令“mysqld --verbose --help”。

如果服务器正在运行，那么可以连接到它，向它询问数据目录的位置。服务器维护着许多与其运作有关的系统变量，并且可以报告其中的任何一个值。数据目录的位置保存在datadir变量里，如下：

    mysql> SHOW VARIABLES LIKE 'datadir';


## 数据目录结构

MySQL的数据目录存放着服务器管理的所有数据库。一般情况下，它是一个树形结构，是直接利用Unix或Windows的文件系统层次结构实现的。一般情况下可以这样理解：

- 每个数据库在数据目录下都对有一个对应的数据库目录
- 数据库里的表、视图和触发器都对应于数据库目录中的文件

不过类似默认存储引擎InnoDB使用的是一种表空间来表示数据库目录。基于系统表空间实现的方式是，表空间由数据目录里的一个或多个大文件构成。表空间的这些组成文件共同形成了一个在逻辑上连续不断的存储空间，其大小为各个组成文件大小之和。默认情况下，InnoDB会将其表存储到这个系统表空间里。当然还有一种实现是独立表空间。

视图和触发器在文件系统里的表示是，在包含视图和触发器对象的数据库目录里，有与对象相关联的文件。例如，每个视图都有一个.frm文件，其中包含着该视图的定义和其他相关属性；而每个与表相关联的触发器都会存储在一个.TRG文件里。